# 微前端

以single-spa为例子

子应用需要做的事情：

1.导出必要的生命周期钩子函数：

bootstrap: 在应用初始化前执行一些准备工作，例如加载依赖，初始化数据。

mount：当应用需要挂载到页面时执行，进行DOM操作，绑定事件。

unmount：在应用卸载时调用，用于清理资源，解绑事件等。

2.处理样式隔离 通过showDom的方式来隔离样式

3.以基座进行通信

1.通过自定义事件来传递参数，

2.通过url路径来传递参数。

3.通过共享存储的方式：比如：localstorge，sessionStorage

4.通过vuex类似的管理库

基座应用需要做的事情

1.配置路由：定义各个子应用的激活规则，根据不同的URL路径确定加载哪个子应用。

2.加载子应用：根据路由变化和子应用的注册信息，调用子应用的加载函数获取资源。

公司微前端亮点：

支持页面级别的缓存：就是当编辑了一个页面再切换到另一个页面，这时还能保留页面状态

实现：这个是通过vuex来缓存页面状态页面的状态

基座怎么加载出子应用：layout路由拦截到子应用url，遍历所有菜单的url，layout会根据当前路径匹配到子应用的入口url地址来加载页面。

跨应用通信是怎么做到的呢：

1.通过状态管理：在主应用中约定一个主子应用共享的状态模块，在子应用首次加载会自动同步到模块的内容。

2.事件总线：通过微前端插件hui-pligin-micro-app会自动注册一条全局的时间总线，用来处理应用间的自定义事件。

样式隔离：通过子应用安装hui-plugin-seletor-namespace plugin配置来实现为哪些选择器添加命名空间。

