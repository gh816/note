**圜晖项目相关**

## IETM编辑器

1.把slate的默认删除行为重写，在我们的UI中用户可以选择整个元素块进行删除，而且删除的节点没有父节点也不让删除，然后XSD标准当中有规则哪些节点是不让删除的，对于子节点为空删除自身节点。
把slate的默认输入逻辑重写：根据xsd标准哪些节点不让输入，还有就是在输入文字自动带上段落标签。

2.表格拖拽功能：首先实现一个可拖拽手柄，然后这个手柄监听三个核心的鼠标事件，onMouseDown，这个是用户在拖拽手柄上按下鼠标时触发，这会记录下拖拽的起始列和鼠标的初始X坐标，onMouseMove,这个事件就是鼠标移动是触发，这个事件会持续的计算鼠标当前的X坐标以初始值X坐标的差值，当计算出的差值不会立马修改DOM的宽度，而是通过修改slate的属性中的attributes值，当slate的数据更新会自动从新渲染。col组件会读取设置在slate的属性中的attributes值进行宽度的修改



难点，亮点

渲染万级节点不卡顿：

故事：原本的设计是我点击一个标签进行高亮，或者选中一块区域去标记，slate都会遍历整个树，所以就会出现卡顿的情况。
解决方案：封装一个收集id映射path的map，只在editor.children发生变化时才会重建索引。

表格拖拽优化：

故事：表格拖拽是高频事件，如果每次拖动都改变slate状态就会很卡顿，

解决方案：在拖动的过程中修改dom达到列宽变化，然后在最终放下的时候更新slate数据。

slate渲染出来element

```
{
attributes: []//标签上面的属性
children: [
{},
]
type: "dmAddress"// 元素标签名
nodeType: "element" // 节点类型
}
```

slate优点：1.自定义数据模型2.自定义渲染（完全控制UI）3.自定义编辑行为（插件系统）
